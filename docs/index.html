<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tatami_tiledb: tatami for TileDB matrices</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tatami_tiledb
   </div>
   <div id="projectbrief">tatami bindings for TileDB-backed matrices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">tatami for TileDB matrices </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__github_workspace_README"></a> <img src="https://github.com/tatami-inc/tatami_tiledb/actions/workflows/run-tests.yaml/badge.svg" alt="Unit tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/tatami-inc/tatami_tiledb/actions/workflows/doxygenate.yaml/badge.svg" alt="Documentation" style="pointer-events: none;" class="inline"/> <a href="https://codecov.io/gh/tatami-inc/tatami_tiledb"><img src="https://codecov.io/gh/tatami-inc/tatami_tiledb/branch/master/graph/badge.svg?token=Z189ORCLLR" alt="Codecov" style="pointer-events: none;" class="inline"/></a></p>
<h1>Overview</h1>
<p >This repository implements <a href="https://github.com/tatami-inc/tatami"><b>tatami</b></a> bindings for <a href="https://github.com/tiledb-inc/tiledb">TileDB</a>-backed matrices, allowing random access without loading the entire dataset into memory. Any matrix stored as a 2-dimensional TileDB array (dense or sparse) can be represented as a <code><a class="elRef" href="https://tatami-inc.github.io/tatami/classtatami_1_1Matrix.html">tatami::Matrix</a></code> and consumed by <b>tatami</b>-compatible applications.</p>
<h1>Quick start</h1>
<p ><b><a class="el" href="namespacetatami__tiledb.html" title="tatami bindings for TileDB matrices.">tatami_tiledb</a></b> is a header-only library, so it can be easily used by just <code>#include</code>ing the relevant source files:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="tatami__tiledb_8hpp.html">tatami_tiledb/tatami_tiledb.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classtatami__tiledb_1_1TileDbDenseMatrix.html">tatami_tiledb::TileDbDenseMatrix&lt;double, int&gt;</a> dense_mat(<span class="stringliteral">&quot;some_dir&quot;</span>, <span class="stringliteral">&quot;attr_name&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="classtatami__tiledb_1_1TileDbSparseMatrix.html">tatami_tiledb::TileDbSparseMatrix&lt;double, int&gt;</a> sparse_mat(<span class="stringliteral">&quot;some_dir&quot;</span>, <span class="stringliteral">&quot;attr_name&quot;</span>);</div>
<div class="ttc" id="aclasstatami__tiledb_1_1TileDbDenseMatrix_html"><div class="ttname"><a href="classtatami__tiledb_1_1TileDbDenseMatrix.html">tatami_tiledb::TileDbDenseMatrix</a></div><div class="ttdoc">TileDB-backed dense matrix.</div><div class="ttdef"><b>Definition:</b> TileDbDenseMatrix.hpp:38</div></div>
<div class="ttc" id="aclasstatami__tiledb_1_1TileDbSparseMatrix_html"><div class="ttname"><a href="classtatami__tiledb_1_1TileDbSparseMatrix.html">tatami_tiledb::TileDbSparseMatrix</a></div><div class="ttdoc">TileDB-backed sparse matrix.</div><div class="ttdef"><b>Definition:</b> TileDbSparseMatrix.hpp:37</div></div>
<div class="ttc" id="atatami__tiledb_8hpp_html"><div class="ttname"><a href="tatami__tiledb_8hpp.html">tatami_tiledb.hpp</a></div><div class="ttdoc">Umbrella header for TileDB representations.</div></div>
</div><!-- fragment --><p >If the dense/sparse nature is not known beforehand, we can use the <code>make_TileDbMatrix()</code> function to decide for us instead:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> some_mat = <a class="code hl_function" href="namespacetatami__tiledb.html#a956c942c27f3c33e0a134d0b98a868c8">tatami_tiledb::make_TileDbMatrix</a>(<span class="stringliteral">&quot;some_dir&quot;</span>, <span class="stringliteral">&quot;attr_name&quot;</span>);</div>
<div class="ttc" id="anamespacetatami__tiledb_html_a956c942c27f3c33e0a134d0b98a868c8"><div class="ttname"><a href="namespacetatami__tiledb.html#a956c942c27f3c33e0a134d0b98a868c8">tatami_tiledb::make_TileDbMatrix</a></div><div class="ttdeci">std::shared_ptr&lt; tatami::Matrix&lt; Value_, Index_ &gt; &gt; make_TileDbMatrix(std::string uri, std::string attribute, const TileDbOptions &amp;options)</div><div class="ttdef"><b>Definition:</b> make_TileDbMatrix.hpp:32</div></div>
</div><!-- fragment --><p >Advanced users can fiddle with the options, in particular the size of the tile cache. For example, we could force the matrix to use no more than 200 MB of memory in the cache:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structtatami__tiledb_1_1TileDbOptions.html">tatami_tiledb::TileDbOptions</a> opt;</div>
<div class="line">opt.<a class="code hl_variable" href="structtatami__tiledb_1_1TileDbOptions.html#a318b648466b3dd661475bd672fbc1211">maximum_cache_size</a> = 200000000;</div>
<div class="line">opt.<a class="code hl_variable" href="structtatami__tiledb_1_1TileDbOptions.html#a8fec7a4cd15cace444af6c3fb3c9f7da">require_minimum_cache</a> = <span class="keyword">false</span>; <span class="comment">// don&#39;t allow the cache to automatically expand.</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> some_mat2 = <a class="code hl_function" href="namespacetatami__tiledb.html#a956c942c27f3c33e0a134d0b98a868c8">tatami_tiledb::make_TileDbMatrix</a>(<span class="stringliteral">&quot;some_dir&quot;</span>, <span class="stringliteral">&quot;attr_name&quot;</span>, opt);</div>
<div class="ttc" id="astructtatami__tiledb_1_1TileDbOptions_html"><div class="ttname"><a href="structtatami__tiledb_1_1TileDbOptions.html">tatami_tiledb::TileDbOptions</a></div><div class="ttdoc">Options for TileDB extraction.</div><div class="ttdef"><b>Definition:</b> TileDbOptions.hpp:14</div></div>
<div class="ttc" id="astructtatami__tiledb_1_1TileDbOptions_html_a318b648466b3dd661475bd672fbc1211"><div class="ttname"><a href="structtatami__tiledb_1_1TileDbOptions.html#a318b648466b3dd661475bd672fbc1211">tatami_tiledb::TileDbOptions::maximum_cache_size</a></div><div class="ttdeci">size_t maximum_cache_size</div><div class="ttdef"><b>Definition:</b> TileDbOptions.hpp:24</div></div>
<div class="ttc" id="astructtatami__tiledb_1_1TileDbOptions_html_a8fec7a4cd15cace444af6c3fb3c9f7da"><div class="ttname"><a href="structtatami__tiledb_1_1TileDbOptions.html#a8fec7a4cd15cace444af6c3fb3c9f7da">tatami_tiledb::TileDbOptions::require_minimum_cache</a></div><div class="ttdeci">bool require_minimum_cache</div><div class="ttdef"><b>Definition:</b> TileDbOptions.hpp:31</div></div>
</div><!-- fragment --><p >Check out the <a href="https://tatami-inc.github.io/tatami_tiledb">reference documentation</a> for more details.</p>
<h1>Building projects</h1>
<h2>Cmake with <code>FetchContent</code></h2>
<p >If you're using CMake, you just need to add something like this to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  tatami</div>
<div class="line">  GIT_REPOSITORY https://github.com/tatami-inc/tatami_tiledb</div>
<div class="line">  GIT_TAG master # or any version of interest</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(tatami_tiledb)</div>
</div><!-- fragment --><p >Then you can link to <b><a class="el" href="namespacetatami__tiledb.html" title="tatami bindings for TileDB matrices.">tatami_tiledb</a></b> to make the headers available during compilation:</p>
<div class="fragment"><div class="line"># For executables:</div>
<div class="line">target_link_libraries(myexe tatami_tiledb)</div>
<div class="line"> </div>
<div class="line"># For libaries</div>
<div class="line">target_link_libraries(mylib INTERFACE tatami_tiledb)</div>
</div><!-- fragment --><h2>CMake using <code>find_package()</code></h2>
<p >You can install the library by cloning a suitable version of this repository and running the following commands:</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DTATAMI_TILEDB_TESTS=OFF</div>
<div class="line">cmake --build . --target install</div>
</div><!-- fragment --><p >Then you can use <code>find_package()</code> as usual:</p>
<div class="fragment"><div class="line">find_package(tatami_tatami_tiledb CONFIG REQUIRED)</div>
<div class="line">target_link_libraries(mylib INTERFACE tatami::tatami_tiledb)</div>
</div><!-- fragment --><h2>Manual</h2>
<p >If you're not using CMake, the simple approach is to just copy the files - either directly or with Git submodules - and include their path during compilation with, e.g., GCC's <code>-I</code>. This will also require the dependencies listed in <a href="extern/CMakeLists.txt"><code>extern/CMakeLists.txt</code></a>, namely the <a href="https://github.com/tatami-inc/tatami_chunked"><b>tatami_chunked</b></a> library.</p>
<p >You'll also need to link to the TileDB library yourself (version 2.15 or higher). <b><a class="el" href="namespacetatami__tiledb.html" title="tatami bindings for TileDB matrices.">tatami_tiledb</a></b> does not place any restrictions on the source of the TileDB library; in the simplest case, we just download the latest <a href="https://github.com/TileDB-Inc/TileDB/releases">release</a>, unpack it in some <code>tiledb/</code> directory, and link to it as shown below. (Proper installation instructions for TileDB can be found in their <a href="https://docs.tiledb.com/main/how-to/installation/pre-built-packages">documentation</a>.)</p>
<div class="fragment"><div class="line">find_package(TileDB PATHS tiledb)</div>
<div class="line">target_link_libraries(myexe TileDB::tiledb_shared)</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
